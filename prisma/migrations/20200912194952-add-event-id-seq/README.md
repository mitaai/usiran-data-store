# Migration `20200912194952-add-event-id-seq`

This migration has been generated by Ben Silverman at 9/12/2020, 1:49:52 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
DROP INDEX "public"."public_BriefingBook_id0_idx"

DROP INDEX "public"."public_BriefingBookDocuments_id0_idx"

DROP INDEX "public"."public_BriefingBookEvents_id0_idx"

DROP INDEX "public"."public_Classification_id0_idx"

DROP INDEX "public"."public_ClassificationOnDocument_id0_idx"

DROP INDEX "public"."public_Document_id0_idx"

DROP INDEX "public"."public_DocumentAuthor_id0_idx"

DROP INDEX "public"."public_DocumentEvents_id0_idx"

DROP INDEX "public"."public_DocumentFiles_id0_idx"

DROP INDEX "public"."public_DocumentInvolvedStakeholders_id0_idx"

DROP INDEX "public"."public_DocumentLocations_id0_idx"

DROP INDEX "public"."public_Event_id0_idx"

DROP INDEX "public"."public_File_id0_idx"

DROP INDEX "public"."public_Kind_id0_idx"

DROP INDEX "public"."public_KindOnDocument_id0_idx"

DROP INDEX "public"."public_Location_id0_idx"

DROP INDEX "public"."public_LocationOnEvent_id0_idx"

DROP INDEX "public"."public_Stakeholder_id0_idx"

DROP INDEX "public"."public_StakeholderBriefingBooks_id0_idx"

DROP INDEX "public"."public_StakeholderEvents_id0_idx"

DROP INDEX "public"."public_Tag_id0_idx"

DROP INDEX "public"."public_TagOnDocument_id0_idx"

DROP INDEX "public"."public_TagOnEvent_id0_idx"

DROP INDEX "public"."public_User_id0_idx"

DROP INDEX "public"."public__RelayId_id0_idx"

ALTER TABLE "public"."BriefingBook" ALTER COLUMN "id" DROP DEFAULT

ALTER TABLE "public"."BriefingBookDocument" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "A" DROP DEFAULT,
ALTER COLUMN "B" DROP DEFAULT

ALTER TABLE "public"."BriefingBookEvent" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "A" DROP DEFAULT,
ALTER COLUMN "B" DROP DEFAULT

ALTER TABLE "public"."Classification" ALTER COLUMN "id" DROP DEFAULT

ALTER TABLE "public"."ClassificationOnDocument" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "A" DROP DEFAULT,
ALTER COLUMN "B" DROP DEFAULT

ALTER TABLE "public"."Document" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "documentCreationDate" DROP DEFAULT,
ALTER COLUMN "documentMediaType" SET DEFAULT E'RawText',
ALTER COLUMN "documentPublicationDate" DROP DEFAULT

ALTER TABLE "public"."DocumentAuthor" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "A" DROP DEFAULT,
ALTER COLUMN "B" DROP DEFAULT

ALTER TABLE "public"."DocumentEvent" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "A" DROP DEFAULT,
ALTER COLUMN "B" DROP DEFAULT

ALTER TABLE "public"."DocumentFile" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "A" DROP DEFAULT,
ALTER COLUMN "B" DROP DEFAULT

ALTER TABLE "public"."DocumentInvolvedStakeholder" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "A" DROP DEFAULT,
ALTER COLUMN "B" DROP DEFAULT

ALTER TABLE "public"."DocumentLocation" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "A" DROP DEFAULT,
ALTER COLUMN "B" DROP DEFAULT

ALTER TABLE "public"."Event" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "eventEndDate" DROP DEFAULT,
ALTER COLUMN "eventStartDate" DROP DEFAULT

ALTER TABLE "public"."File" ALTER COLUMN "id" DROP DEFAULT

ALTER TABLE "public"."Kind" ALTER COLUMN "id" DROP DEFAULT

ALTER TABLE "public"."KindOnDocument" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "A" DROP DEFAULT,
ALTER COLUMN "B" DROP DEFAULT

ALTER TABLE "public"."Location" ALTER COLUMN "id" DROP DEFAULT

ALTER TABLE "public"."LocationOnEvent" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "A" DROP DEFAULT,
ALTER COLUMN "B" DROP DEFAULT

ALTER TABLE "public"."Stakeholder" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "isStakeholderInstitution" SET DEFAULT 0

ALTER TABLE "public"."StakeholderBriefingBook" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "A" DROP DEFAULT,
ALTER COLUMN "B" DROP DEFAULT

ALTER TABLE "public"."StakeholderEvent" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "A" DROP DEFAULT,
ALTER COLUMN "B" DROP DEFAULT

ALTER TABLE "public"."Tag" ALTER COLUMN "id" DROP DEFAULT

ALTER TABLE "public"."TagOnDocument" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "A" DROP DEFAULT,
ALTER COLUMN "B" DROP DEFAULT

ALTER TABLE "public"."TagOnEvent" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "A" DROP DEFAULT,
ALTER COLUMN "B" DROP DEFAULT

ALTER TABLE "public"."User" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "role" DROP DEFAULT

ALTER TABLE "public"."_RelayId" ALTER COLUMN "id" DROP DEFAULT,
ALTER COLUMN "modelId" DROP DEFAULT

CREATE TABLE "public"."EventIdSeq" (
"id" SERIAL,
PRIMARY KEY ("id")
)

ALTER INDEX "public"."public_BriefingBook_briefingBookTitle1_idx" RENAME TO "BriefingBook.briefingBookTitle_unique"

ALTER INDEX "public"."public_BriefingBookDocuments_A1_idx" RENAME TO "BriefingBookDocument_AB_unique"

ALTER INDEX "public"."public_BriefingBookDocuments_A2_idx" RENAME TO "BriefingBookDocument_BriefingBookId"

ALTER INDEX "public"."public_BriefingBookDocuments_B3_idx" RENAME TO "BriefingBookDocument_DocumentId"

ALTER INDEX "public"."public_BriefingBookEvents_A1_idx" RENAME TO "BriefingBookEvent_AB_unique"

ALTER INDEX "public"."public_BriefingBookEvents_A2_idx" RENAME TO "BriefingBookEvent_EventId"

ALTER INDEX "public"."public_BriefingBookEvents_B3_idx" RENAME TO "BriefingBookEvent_BriefingBookId"

ALTER INDEX "public"."public_Classification_name1_idx" RENAME TO "Classification.name_unique"

ALTER INDEX "public"."public_ClassificationOnDocument_A1_idx" RENAME TO "ClassificationOnDocument_AB_unique"

ALTER INDEX "public"."public_ClassificationOnDocument_A2_idx" RENAME TO "ClassificationOnDocument_ClassificationId"

ALTER INDEX "public"."public_ClassificationOnDocument_B3_idx" RENAME TO "ClassificationOnDocument_DocumentId"

ALTER INDEX "public"."public_DocumentAuthor_A1_idx" RENAME TO "DocumentAuthor_AB_unique"

ALTER INDEX "public"."public_DocumentAuthor_A2_idx" RENAME TO "DocumentAuthor_DocumentId"

ALTER INDEX "public"."public_DocumentAuthor_B3_idx" RENAME TO "DocumentAuthor_StakeholderId"

ALTER INDEX "public"."public_DocumentEvents_A1_idx" RENAME TO "DocumentEvent_AB_unique"

ALTER INDEX "public"."public_DocumentEvents_A2_idx" RENAME TO "DocumentEvent_DocumentId"

ALTER INDEX "public"."public_DocumentEvents_B3_idx" RENAME TO "DocumentEvent_EventId"

ALTER INDEX "public"."public_DocumentFiles_A1_idx" RENAME TO "DocumentFile_AB_unique"

ALTER INDEX "public"."public_DocumentFiles_A2_idx" RENAME TO "DocumentFile_DocumentId"

ALTER INDEX "public"."public_DocumentFiles_B3_idx" RENAME TO "DocumentFile_FileId"

ALTER INDEX "public"."public_DocumentInvolvedStakeholders_A1_idx" RENAME TO "DocumentInvolvedStakeholder_AB_unique"

ALTER INDEX "public"."public_DocumentInvolvedStakeholders_A2_idx" RENAME TO "DocumentInvolvedStakeholder_StakeholderId"

ALTER INDEX "public"."public_DocumentInvolvedStakeholders_B3_idx" RENAME TO "DocumentInvolvedStakeholder_DocumentId"

ALTER INDEX "public"."public_DocumentLocations_A1_idx" RENAME TO "DocumentLocation_AB_unique"

ALTER INDEX "public"."public_DocumentLocations_A2_idx" RENAME TO "DocumentLocation_LocationId"

ALTER INDEX "public"."public_DocumentLocations_B3_idx" RENAME TO "DocumentLocation_DocumentId"

ALTER INDEX "public"."public_File_secret1_idx" RENAME TO "File.secret_unique"

ALTER INDEX "public"."public_File_url2_idx" RENAME TO "File.url_unique"

ALTER INDEX "public"."public_Kind_name1_idx" RENAME TO "Kind.name_unique"

ALTER INDEX "public"."public_KindOnDocument_A1_idx" RENAME TO "KindOnDocument_AB_unique"

ALTER INDEX "public"."public_KindOnDocument_A2_idx" RENAME TO "KindOnDocument_KindId"

ALTER INDEX "public"."public_KindOnDocument_B3_idx" RENAME TO "KindOnDocument_DocumentId"

ALTER INDEX "public"."public_Location_locationName1_idx" RENAME TO "Location.locationName_unique"

ALTER INDEX "public"."public_LocationOnEvent_A1_idx" RENAME TO "LocationOnEvent_AB_unique"

ALTER INDEX "public"."public_LocationOnEvent_A2_idx" RENAME TO "LocationOnEvent_LocationId"

ALTER INDEX "public"."public_LocationOnEvent_B3_idx" RENAME TO "LocationOnEvent_EventId"

ALTER INDEX "public"."public_Stakeholder_stakeholderFullName1_idx" RENAME TO "Stakeholder.stakeholderFullName_unique"

ALTER INDEX "public"."public_StakeholderBriefingBooks_A1_idx" RENAME TO "StakeholderBriefingBook_AB_unique"

ALTER INDEX "public"."public_StakeholderBriefingBooks_A2_idx" RENAME TO "StakeholderBriefingBook_StakeholderId"

ALTER INDEX "public"."public_StakeholderBriefingBooks_B3_idx" RENAME TO "StakeholderBriefingBook_BriefingBookId"

ALTER INDEX "public"."public_StakeholderEvents_A1_idx" RENAME TO "StakeholderEvent_AB_unique"

ALTER INDEX "public"."public_StakeholderEvents_A2_idx" RENAME TO "StakeholderEvent_StakeholderId"

ALTER INDEX "public"."public_StakeholderEvents_B3_idx" RENAME TO "StakeholderEvent_EventId"

ALTER INDEX "public"."public_Tag_name1_idx" RENAME TO "Tag.name_unique"

ALTER INDEX "public"."public_Tag_tagWikipediaUri2_idx" RENAME TO "Tag.tagWikipediaUri_unique"

ALTER INDEX "public"."public_TagOnDocument_A1_idx" RENAME TO "TagOnDocument_AB_unique"

ALTER INDEX "public"."public_TagOnDocument_A2_idx" RENAME TO "TagOnDocument_TagId"

ALTER INDEX "public"."public_TagOnDocument_B3_idx" RENAME TO "TagOnDocument_DocumentId"

ALTER INDEX "public"."public_TagOnEvent_A1_idx" RENAME TO "TagOnEvent_AB_unique"

ALTER INDEX "public"."public_TagOnEvent_A2_idx" RENAME TO "TagOnEvent_TagId"

ALTER INDEX "public"."public_TagOnEvent_B3_idx" RENAME TO "TagOnEvent_EventId"

ALTER INDEX "public"."public_User_email2_idx" RENAME TO "User.email_unique"

ALTER INDEX "public"."public_User_userName1_idx" RENAME TO "User.userName_unique"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200912194952-add-event-id-seq
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,326 @@
+generator client {
+  provider = "prisma-client-js"
+  previewFeatures = ["connectOrCreate","insensitiveFilters"]
+}
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+model RelayId {
+  id      String @id
+  modelId String
+
+  @@map("_RelayId")
+}
+
+model BriefingBook {
+  briefingBookDescription   String?
+  briefingBookTitle         String                      @unique
+  createdAt                 DateTime                    @default(now())
+  id                        String                      @id
+  updatedAt                 DateTime                    @default(now())
+  mentionedDocuments        BriefingBookDocument[]
+  mentionedEvents           BriefingBookEvent[]
+  mentionedStakeholders     StakeholderBriefingBook[]
+}
+
+model BriefingBookDocument {
+  A            String
+  B            String
+  id           String       @id @default(cuid())
+  BriefingBook BriefingBook @relation(fields: [A], references: [id])
+  Document     Document     @relation(fields: [B], references: [id])
+
+  @@index([A], name: "BriefingBookDocument_BriefingBookId")
+  @@index([B], name: "BriefingBookDocument_DocumentId")
+  @@unique([A, B], name: "BriefingBookDocument_AB_unique")
+}
+
+model BriefingBookEvent {
+  A            String
+  B            String
+  id           String       @id @default(cuid())
+  Event        Event        @relation(fields: [A], references: [id])
+  BriefingBook BriefingBook @relation(fields: [B], references: [id])
+
+  @@index([A], name: "BriefingBookEvent_EventId")
+  @@index([B], name: "BriefingBookEvent_BriefingBookId")
+  @@unique([A, B], name: "BriefingBookEvent_AB_unique")
+}
+
+model ClassificationOnDocument {
+  A              String
+  B              String
+  id             String         @id @default(cuid())
+  Classification Classification @relation(fields: [A], references: [id])
+  Document       Document       @relation(fields: [B], references: [id])
+
+  @@index([A], name: "ClassificationOnDocument_ClassificationId")
+  @@index([B], name: "ClassificationOnDocument_DocumentId")
+  @@unique([A, B], name: "ClassificationOnDocument_AB_unique")
+}
+
+model DocumentAuthor {
+  A           String
+  B           String
+  id          String      @id @default(cuid())
+  Document    Document    @relation(fields: [A], references: [id])
+  Stakeholder Stakeholder @relation(fields: [B], references: [id])
+
+  @@index([A], name: "DocumentAuthor_DocumentId")
+  @@index([B], name: "DocumentAuthor_StakeholderId")
+  @@unique([A, B], name: "DocumentAuthor_AB_unique")
+}
+
+model DocumentEvent {
+  A        String
+  B        String
+  id       String   @id @default(cuid())
+  Document Document @relation(fields: [A], references: [id])
+  Event    Event    @relation(fields: [B], references: [id])
+
+  @@index([A], name: "DocumentEvent_DocumentId")
+  @@index([B], name: "DocumentEvent_EventId")
+  @@unique([A, B], name: "DocumentEvent_AB_unique")
+}
+
+model DocumentFile {
+  A        String
+  B        String
+  id       String   @id @default(cuid())
+  Document Document @relation(fields: [A], references: [id])
+  File     File     @relation(fields: [B], references: [id])
+
+  @@index([A], name: "DocumentFile_DocumentId")
+  @@index([B], name: "DocumentFile_FileId")
+  @@unique([A, B], name: "DocumentFile_AB_unique")
+}
+
+model DocumentInvolvedStakeholder {
+  A           String
+  B           String
+  id          String      @id @default(cuid())
+  Stakeholder Stakeholder @relation(fields: [A], references: [id])
+  Document    Document    @relation(fields: [B], references: [id])
+
+  @@index([A], name: "DocumentInvolvedStakeholder_StakeholderId")
+  @@index([B], name: "DocumentInvolvedStakeholder_DocumentId")
+  @@unique([A, B], name: "DocumentInvolvedStakeholder_AB_unique")
+}
+
+model DocumentLocation {
+  A        String
+  B        String
+  id       String   @id @default(cuid())
+  Location Location @relation(fields: [A], references: [id])
+  Document Document @relation(fields: [B], references: [id])
+
+  @@index([A], name: "DocumentLocation_LocationId")
+  @@index([B], name: "DocumentLocation_DocumentId")
+  @@unique([A, B], name: "DocumentLocation_AB_unique")
+}
+
+model KindOnDocument {
+  A        String
+  B        String
+  id       String   @id @default(cuid())
+  Kind     Kind     @relation(fields: [A], references: [id])
+  Document Document @relation(fields: [B], references: [id])
+
+  @@index([A], name: "KindOnDocument_KindId")
+  @@index([B], name: "KindOnDocument_DocumentId")
+  @@unique([A, B], name: "KindOnDocument_AB_unique")
+}
+
+model LocationOnEvent {
+  A        String
+  B        String
+  id       String   @id @default(cuid())
+  Location Location @relation(fields: [A], references: [id])
+  Event    Event    @relation(fields: [B], references: [id])
+
+  @@index([A], name: "LocationOnEvent_LocationId")
+  @@index([B], name: "LocationOnEvent_EventId")
+  @@unique([A, B], name: "LocationOnEvent_AB_unique")
+}
+
+model StakeholderBriefingBook {
+  A            String
+  B            String
+  id           String       @id @default(cuid())
+  Stakeholder  Stakeholder  @relation(fields: [A], references: [id])
+  BriefingBook BriefingBook @relation(fields: [B], references: [id])
+
+  @@index([A], name: "StakeholderBriefingBook_StakeholderId")
+  @@index([B], name: "StakeholderBriefingBook_BriefingBookId")
+  @@unique([A, B], name: "StakeholderBriefingBook_AB_unique")
+}
+
+model StakeholderEvent {
+  A           String
+  B           String
+  id          String      @id @default(cuid())
+  Stakeholder Stakeholder @relation(fields: [A], references: [id])
+  Event       Event       @relation(fields: [B], references: [id])
+
+  @@index([A], name: "StakeholderEvent_StakeholderId")
+  @@index([B], name: "StakeholderEvent_EventId")
+  @@unique([A, B], name: "StakeholderEvent_AB_unique")
+}
+
+model TagOnDocument {
+  A        String
+  B        String
+  id       String   @id @default(cuid())
+  Tag      Tag      @relation(fields: [A], references: [id])
+  Document Document @relation(fields: [B], references: [id])
+
+  @@index([A], name: "TagOnDocument_TagId")
+  @@index([B], name: "TagOnDocument_DocumentId")
+  @@unique([A, B], name: "TagOnDocument_AB_unique")
+}
+
+model TagOnEvent {
+  A     String
+  B     String
+  id    String @id @default(cuid())
+  Tag   Tag    @relation(fields: [A], references: [id])
+  Event Event  @relation(fields: [B], references: [id])
+
+  @@index([A], name: "TagOnEvent_TagId")
+  @@index([B], name: "TagOnEvent_EventId")
+  @@unique([A, B], name: "TagOnEvent_AB_unique")
+}
+
+model Classification {
+  createdAt                   DateTime                    @default(now())
+  id                          String                      @id
+  name                        String                      @unique
+  updatedAt                   DateTime                    @default(now())
+  documentsWithClassification ClassificationOnDocument[]
+}
+
+model Document {
+  createdAt                                                       DateTime                    @default(now())
+  dnsaAbstract                                                    String?
+  dnsaCitation                                                    String?
+  dnsaCollection                                                  String?
+  dnsaFrom                                                        String?
+  dnsaItemNumber                                                  String?
+  dnsaOrigin                                                      String?
+  dnsaStakeholder                                                 String?
+  dnsaSubject                                                     String?
+  dnsaTo                                                          String?
+  dnsaURL                                                         String?
+  documentCreationDate                                            DateTime?
+  documentDescription                                             String?
+  documentMediaType                                               String                      @default("RawText")
+  documentOriginalID                                              String
+  documentPublicationDate                                         DateTime?
+  documentTitle                                                   String
+  documentTranscript                                              String?
+  id                                                              String                      @id
+  sessionNumber                                                   Int?
+  updatedAt                                                       DateTime                    @default(now())
+  briefingBooksMentionedIn                                        BriefingBookDocument[]
+  documentClassification                                          ClassificationOnDocument[]
+  documentAuthors                                                 DocumentAuthor[]
+  mentionedEvents                                                 DocumentEvent[]
+  documentFiles                                                   DocumentFile[]
+  mentionedStakeholders                                           DocumentInvolvedStakeholder[]
+  mentionedLocations                                              DocumentLocation[]
+  documentKind                                                    KindOnDocument[]
+  documentTags                                                    TagOnDocument[]
+}
+
+model Event {
+  createdAt                 DateTime                    @default(now())
+  eventDescription          String?
+  eventEndDate              DateTime?
+  eventStartDate            DateTime
+  eventTitle                String
+  id                        String                      @id
+  updatedAt                 DateTime                    @default(now())
+  briefingBooksMentionedIn  BriefingBookEvent[]
+  documentsMentionedIn      DocumentEvent[]
+  eventLocations            LocationOnEvent[]
+  eventStakeholders         StakeholderEvent[]
+  eventTags                 TagOnEvent[]
+}
+
+model EventIdSeq {
+  id      Int     @id @default(autoincrement())
+}
+
+model File {
+  contentType               String
+  createdAt                 DateTime                    @default(now())
+  id                        String                      @id
+  name                      String
+  secret                    String                      @unique
+  size                      Int
+  updatedAt                 DateTime                    @default(now())
+  url                       String                      @unique
+  documentsIncludedIn       DocumentFile[]
+}
+
+model Kind {
+  createdAt                 DateTime                    @default(now())
+  id                        String                      @id
+  name                      String                      @unique
+  updatedAt                 DateTime                    @default(now())
+  documentsWithKind         KindOnDocument[]
+}
+
+model Location {
+  createdAt                 DateTime                    @default(now())
+  id                        String                      @id @default(cuid())
+  locationDescription       String?
+  locationLatitude          Int?
+  locationLongitude         Int?
+  locationName              String                      @unique
+  locationWikipediaUri      String?
+  updatedAt                 DateTime                    @default(now())
+  documentsMentionedIn      DocumentLocation[]
+  locationEvents            LocationOnEvent[]
+}
+
+model Stakeholder {
+  createdAt                 DateTime                    @default(now())
+  id                        String                      @id @default(cuid())
+  isStakeholderInstitution  Int                         @default(0)
+  stakeholderDescription    String?
+  stakeholderFullName       String                      @unique
+  stakeholderWikipediaUri   String?
+  updatedAt                 DateTime                    @default(now())
+  documents                 DocumentAuthor[]
+  documentsMentionedIn      DocumentInvolvedStakeholder[]
+  briefingBooksMentionedIn  StakeholderBriefingBook[]
+  eventsInvolvedIn          StakeholderEvent[]
+}
+
+model Tag {
+  createdAt                 DateTime                    @default(now())
+  description               String?
+  id                        String                      @id @default(cuid())
+  name                      String                      @unique
+  tagWikipediaUri           String?                     @unique
+  type                      String?
+  updatedAt                 DateTime                    @default(now())
+  documentsWithTag          TagOnDocument[]
+  eventsWithTag             TagOnEvent[]
+}
+
+model User {
+  createdAt DateTime @default(now())
+  email     String?  @unique
+  firstName String?
+  id        String   @id @default(cuid())
+  lastName  String?
+  password  String?
+  role      String?
+  updatedAt DateTime @default(now())
+  userName  String   @unique
+}
```


